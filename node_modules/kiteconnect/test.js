// var KiteConnect = require("./lib/");

// var api_key = "x5h38ge9wfqmif5v",
// 	secret = "uesk63w8ux2k0huox5dwr2sxpe61rfb3",
// 	request_token = "AAAAA";

// kc = new KiteConnect(api_key);
// kc.requestAccessToken(request_token, secret)
// 	.then(function(resp) {
// 		console.log("Success response", resp);
// 	})
// 	.catch(function(err, resp) {
// 		console.log("Error", err.response);
// 	})


var KiteTicker = require("./lib").KiteTicker;
var ticker = new KiteTicker("kitefront", "DV1973", "8a02cc7aa5fbe77bcd6fe21246515656");
ticker.autoReconnect(true, 5, 1)
ticker.connect();
ticker.on("tick", setTick);
ticker.on("connect", subscribe);
ticker.on("noreconnect", function() {
	console.log("noreconnect")
});

ticker.on("reconnecting", function(reconnect_interval, reconnections) {
	console.log("Reconnecting: attempe - ", reconnections, " innterval - ", reconnect_interval);
});

function setTick(ticks) {
	console.log("Ticks");
}
function subscribe() {
	console.log("onconnect")
	var items = [738561];
	ticker.subscribe(items);
	ticker.setMode(ticker.modeFull, items);
}
